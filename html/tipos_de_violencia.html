<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Shout It - Tipos de Violencia</title>
  <link rel="stylesheet" href="../css/estilos_globales.css" />
</head>
<body>

  <!-- HEADER -->
  <div id="header-container"></div>

  <!-- TÍTULO -->
  <div class="main-title">TIPOS DE VIOLENCIA</div>

  <!-- CUADRÍCULA -->
  <div class="grid" id="grid-tipos-violencia"></div>

  <!-- FOOTER -->
  <div id="footer-container"></div>

  <script>
    // ========== CARGAR HEADER Y FOOTER ==========
    fetch('header.html')
      .then(r => r.text())
      .then(html => document.getElementById('header-container').innerHTML = html);

    fetch('footer.html')
      .then(r => r.text())
      .then(html => document.getElementById('footer-container').innerHTML = html);

     
    // ========== DETECTAR SERVIDOR CORRECTO ==========
const apiBase = window.location.hostname.includes('127.0.0.1')
  ? 'http://localhost:4000'
  : 'http://127.0.0.1:4000';

// ========== CARGAR TIPOS DE VIOLENCIA ==========
fetch(`${apiBase}/api/tipos-violencia`)
  .then(res => res.json())
  .then(data => {
    const grid = document.getElementById('grid-tipos-violencia');
    grid.innerHTML = '';

    data.forEach(item => {
      const card = document.createElement('a');
      card.classList.add('card');
      card.href = `${window.location.origin}/html/${item.enlace}`;

      const img = document.createElement('img');
      img.src = `${apiBase}${item.imagen}`;
      img.alt = item.nombre;

      const title = document.createElement('div');
      title.classList.add('card-title');
      title.textContent = item.nombre.toUpperCase();

      card.appendChild(img);
      card.appendChild(title);
      grid.appendChild(card);
    });
  })
  .catch(error => {
    console.error('❌ Error al cargar los tipos de violencia:', error);
    document.getElementById('grid-tipos-violencia').innerHTML =
      '<p>Error al cargar los tipos de violencia. Verifica el servidor.</p>';
  });

  </script>

</body>
</html>
